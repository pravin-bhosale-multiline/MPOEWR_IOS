{"version":3,"sources":["./src/app/existingcustomer/existingcustomer.page.html","./src/app/existingcustomer/existingcustomer.module.ts","./src/app/existingcustomer/existingcustomer.page.scss","./src/app/existingcustomer/existingcustomer.page.ts"],"names":[],"mappings":"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","file":"existingcustomer-existingcustomer-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar  color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n     Existing Lead\\n    </ion-title>\\n    <ion-buttons slot=\\\"end\\\" style=\\\"font-size: 1.8rem;\\\" routerDirection=\\\"root\\\" routerLink=\\\"/home\\\">\\n      <ion-icon name=\\\"home\\\"></ion-icon>\\n    </ion-buttons>\\n    <ion-buttons (click)=\\\"RefreshPage()\\\" slot=\\\"end\\\" style=\\\"font-size: 1.8rem;\\\"><ion-icon name=\\\"refresh\\\"></ion-icon> \\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n\\n\\n<ion-content>\\n  \\n\\n  <ion-grid fixed>\\n\\n   \\n\\n    <div>\\n      <ion-card>\\n        <ion-card-content>\\n\\n      <ion-row>\\n        <ion-col>\\n            <ion-item >\\n              <ion-label  position=\\\"stacked\\\">Organization Activity</ion-label>\\n              <ion-select name=\\\"selectedactivity\\\" #C [(ngModel)]=\\\"selectedactivity\\\" interface=\\\"popover\\\"  (ionChange)=\\\"exonActChange()\\\" multiple=\\\"false\\\" placeholder=\\\"Select Activity\\\">\\n                <ion-select-option *ngFor=\\\"let activity of activitylist\\\" [value]=\\\"activity.id\\\">{{activity.name}}</ion-select-option>\\n              </ion-select>\\n              </ion-item>\\n        </ion-col>\\n      </ion-row>\\n\\n      <!-- <ion-row>\\n        <ion-col>\\n          <ion-item >\\n            <ion-label  position=\\\"stacked\\\">Customer</ion-label>\\n            <ion-select #C [(ngModel)]=\\\"selectedcustomer\\\" multiple=\\\"false\\\" placeholder=\\\"Select Customer\\\" (ionChange)=\\\"onChangeCustomer()\\\">\\n              <ion-select-option *ngFor=\\\"let customer of orgAllcustomer\\\" [value]=\\\"customer.id\\\">{{ customer.scusNature==='F'?customer.sfirmName:customer.sfname +' ' +customer.slname}}  </ion-select-option>\\n            </ion-select>\\n            </ion-item>\\n        </ion-col>\\n    </ion-row> -->\\n\\n    <ion-row>\\n      <ion-col>\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">Customer</ion-label>\\n      <ionic-selectable placeholder=\\\"Select Customer\\\" [searchDebounce]=\\\"1000\\\"\\n      [(ngModel)]=\\\"selectedcustomer\\\"\\n        [items]=\\\"orgAllcustomer\\\"\\n        itemValueField=\\\"id\\\"\\n        itemTextField=\\\"sfname\\\" \\n        [canSearch]=\\\"true\\\"\\n        (onChange)=\\\"refChange($event)\\\"\\n        (onClose)=\\\"onClose($event)\\\"\\n        (onSearch)=\\\"custsearch($event)\\\">\\n      </ionic-selectable>\\n    </ion-item>\\n  </ion-col>\\n</ion-row>\\n\\n    <ion-row>\\n      <ion-col>\\n        <ion-item>\\n            <ion-label position=\\\"stacked\\\">Disapprove Remarks</ion-label>\\n<br>            <!-- <ion-textarea value=\\\"{{Remarks}}\\\" disabled=\\\"true\\\"></ion-textarea> -->\\n            <div style=\\\"overflow:auto;\\\">\\n              {{Remarks}}\\n            </div>\\n        </ion-item>\\n      </ion-col>\\n    </ion-row>\\n    \\n\\n    <ion-row>\\n      <ion-col>\\n          \\n            <ion-button (click)=\\\"onEdit()\\\" [disabled]=\\\"!selectedcustomer || !selectedactivity\\\">\\n                Edit\\n              </ion-button>\\n         \\n      </ion-col>\\n\\n      <ion-col>\\n    \\n          <ion-button (click)=\\\"onCancel()\\\">\\n              Cancel\\n            </ion-button>\\n       \\n    </ion-col>\\n  </ion-row>\\n</ion-card-content>\\n</ion-card>\\n    </div>\\n    </ion-grid>\\n</ion-content>\\n\"","import { NgModule} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { ExistingcustomerPage } from './existingcustomer.page';\nimport { IonicSelectableModule } from 'ionic-selectable';\nconst routes: Routes = [\n  {\n    path: '',\n    component: ExistingcustomerPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,IonicSelectableModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ExistingcustomerPage]\n})\nexport class ExistingcustomerPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2V4aXN0aW5nY3VzdG9tZXIvZXhpc3RpbmdjdXN0b21lci5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { LoginauthService, AllAct, customerheader, Port } from '../login/loginauth.service';\nimport { Router } from '@angular/router';\nimport { ReadertestPage } from '../readertest/readertest.page';\nimport { Platform } from '@ionic/angular';\nimport { IonicSelectableComponent } from 'ionic-selectable';\nimport { LoadingController, AlertController } from '@ionic/angular';\nimport { error } from 'protractor';\nimport { Commonfun } from '../../provider/commonfun'\n\n\n@Component({\n  selector: 'app-existingcustomer',\n  templateUrl: './existingcustomer.page.html',\n  styleUrls: ['./existingcustomer.page.scss'],\n})\n\nexport class ExistingcustomerPage implements OnInit {\n  ports: Port[];\n  port: Port;\n  isLoading = false;\n\n  Remarks: string = '';\n  activitylist: any = [];\n  selectedcustomer: customerheader;\n  leastBusinessPartnerlist: any;\n  orgAllcustomer: any;\n  selectedactivity: string = '';\n  varselectedcust: any;\n  \n  constructor(public loginauth: LoginauthService,private router: Router,private loadingController: LoadingController,public common: Commonfun,) {\n  }\n\n\n  ResetPage() {\n    try {\n          if (this.activitylist.length == 1) {\n            this.selectedactivity = this.activitylist[0].id;\n            this.selectedcustomer = null;\n            this.orgAllcustomer = null;\n            this.Remarks = '';\n          }\n          else {\n            this.selectedactivity = '';\n            this.selectedcustomer = null;\n            this.orgAllcustomer = null;\n            this.Remarks = '';\n          }\n    }\n    catch { }\n  }\n\n  RefreshPage() {\n    this.ResetPage();\n  }\n  ngOnInit() {\n    this.ResetPage();\n   // this.common.chkcache('existingcustomer');\n    setTimeout(() => {\n      this.Bindallactivity();\n    }, 1500);\n    \n  }\n  onClose(event: {component: IonicSelectableComponent,text: any}) {\n    event.component.searchText = \"\";\n  }\n  custsearch(event: {component: IonicSelectableComponent,text: any}) {\n    console.log(\"custsearch\");\n    if (event.text.length >= 3) {\n        this.BindCustomer(event.text);\n    } else {\n     // this.orgAllcustomer = [];\n     if (!!this.leastBusinessPartnerlist && this.leastBusinessPartnerlist.length > this.loginauth.minlistcount) {\n      this.orgAllcustomer = [];\n     } else {\n\n     }\n    }\n\n  }\n\n\n\n  BindCustomer(searchkey) {\n    try {\n              if (this.selectedactivity != '' && searchkey != '') {\n              this.loginauth.getexistcustmerapi(this.selectedactivity, searchkey).subscribe(data => {\n                const response = data;\n                this.orgAllcustomer = response;\n\n              }, error => {\n\n              });\n\n            }\n      else if (this.selectedactivity != '' && searchkey == '') {\n        //=============start for top 10================= \t\n        console.log('leastBusinessPartnerlist');\n        this.loginauth.getexistcustmerapi(this.selectedactivity, \"\").subscribe(data => {\n          const response = data;\n\n          this.leastBusinessPartnerlist = response;\n          if (this.leastBusinessPartnerlist.length > this.loginauth.minlistcount) {\n            this.orgAllcustomer = null\n          }\n          else {\n            this.orgAllcustomer = response;\n          }\n          // \n        }, error => {\n\n        });\n        //=============end for top 10================= \n      }\n    } catch (error) {\n      // this.loadingDismiss();\n\n    }\n  }\n  onChangeCustomer() {\n    try {\n      this.loadingPresent();\n      this.Remarks = '';\n\n      if (this.selectedcustomer != null) {\n        this.varselectedcust = this.orgAllcustomer.find(item => item.id === this.selectedcustomer.id);\n        this.Remarks = this.varselectedcust.disapproveremarks == null ? \"\" : this.varselectedcust.disapproveremarks;\n      }\n      this.loadingDismiss();\n    } catch (error) {\n      this.loadingDismiss();\n\n    }\n\n  }\n\n  Bindallactivity() {\n    try {\n          this.activitylist[0] = this.loginauth.selectedactivity;\n            setTimeout(() => {\n              this.selectedactivity = this.activitylist[0].id;\n            }, 500);\n    } catch (error) {\n      this.loadingDismiss();\n    }\n  }\n\n  exonActChange() {\n  console.log(\"exonActChange\");\n  this.BindCustomer(\"\");\n  }\n\n  onEdit() {\n    this.router.navigateByUrl('/newcustomer?selectedcustomer=' + this.selectedcustomer.id);\n    this.ResetPage();\n  }\n  onCancel() {\n    this.ResetPage();\n  }\n\n  refChange(event: {component: IonicSelectableComponent,value: any}) {\n    this.onChangeCustomer();\n    event.component._searchText = \"\";\n  }\n\n  async loadingPresent() {\n    this.isLoading = true;\n    return await this.loadingController.create({\n      message: 'Please wait ...',\n      spinner: 'circles'\n    }).then(a => {\n      a.present().then(() => {\n\n        if (!this.isLoading) {\n          a.dismiss().then(() =>\n            console.log('abort laoding'));\n        }\n      });\n    });\n  }\n\n  async loadingDismiss() {\n    this.isLoading = false;\n    return await this.loadingController.dismiss().then(() =>\n      console.log('loading dismissed'));\n  }\n\n\n\n}\n"],"sourceRoot":""}