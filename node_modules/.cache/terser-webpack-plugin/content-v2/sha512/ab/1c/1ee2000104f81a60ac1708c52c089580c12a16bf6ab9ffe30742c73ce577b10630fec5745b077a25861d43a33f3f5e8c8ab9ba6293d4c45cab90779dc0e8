{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{lS35:function(e,t,r){\"use strict\";r.d(t,\"a\",function(){return m});var i=r(\"mrSG\"),s=r(\"Q1FS\"),n=r(\"t/Na\"),a=r(\"SaL8\"),o=r(\"yXwN\"),c=r(\"Ztuw\"),p=r(\"EOHu\"),d=r(\"yp2w\"),l=r(\"ZZ/e\"),v=r(\"gRf5\"),u=r(\"CcnG\"),m=function(){function e(e,t,r,i,s,n,a){this.genericHTTP=e,this.loginService=t,this.httpClient=r,this.msg=i,this.cordovaHTTP=s,this.platform=n,this.transfer=a,this.TAG=\"ServiceEngineerVisitService\"}return e.prototype.getVenderApprovalList=function(){try{return this.genericHTTP.get(a.a.DOMAIN_URL+\"/openbravo/ws/in.mbs.webservice.CustomerServiceDetails?userid=\"+this.loginService.userid+\"&appcomplaint=N&servmanager=N&serveng=Y&sparesku=Y&activity=\"+this.loginService.selectedactivity.id)}catch(e){console.error(this.TAG,e)}},e.prototype.getServiceManagerList=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t,r=this;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e=a.a.DOMAIN_URL+\"/openbravo/ws/in.mbs.webservice.BusinessPartnerAsPerCategory?activityid=\"+this.loginService.selectedactivity.id+\"&c_bgroup_id=\"+this.loginService.service_manager_id,this.serviceManagerList?[2,s.Observable.create(function(e){e.next(r.serviceManagerList),e.complete()})]:[3,1];case 1:return t=this,[4,this.genericHTTP.get(e).toPromise()];case 2:return t.serviceManagerList=i.sent(),[2,s.Observable.create(function(e){e.next(r.serviceManagerList),e.complete()})];case 3:return[3,5];case 4:return i.sent(),[3,5];case 5:return[2]}})})},e.prototype.getSpareSKUCode=function(){try{return this.genericHTTP.get(\"assets/data/skuCode.json\")}catch(e){}},e.prototype.getProposedActionList=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t,r=this;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e=a.a.DOMAIN_URL+\"/openbravo/ws/in.mbs.webservice.ListOfvaluesReference?user_id=\"+this.loginService.userid+\"&refname=MSNR%20Proposed%20Action\",this.proposedActionList?[2,s.Observable.create(function(e){e.next(r.proposedActionList),e.complete()})]:[3,1];case 1:return t=this,[4,this.genericHTTP.get(e).toPromise()];case 2:return t.proposedActionList=i.sent(),[2,s.Observable.create(function(e){e.next(r.proposedActionList),e.complete()})];case 3:return[3,5];case 4:return i.sent(),[3,5];case 5:return[2]}})})},e.prototype.getComplaintStatus=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t,r=this;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e=a.a.DOMAIN_URL+\"/openbravo/ws/in.mbs.webservice.ListOfvaluesReference?refname=MSNR%20Status\",this.complaintStatusList?[2,s.Observable.create(function(e){e.next(r.complaintStatusList),e.complete()})]:[3,1];case 1:return t=this,[4,this.genericHTTP.get(e).toPromise()];case 2:return t.complaintStatusList=i.sent(),[2,s.Observable.create(function(e){e.next(r.complaintStatusList),e.complete()})];case 3:return[3,5];case 4:return i.sent(),[3,5];case 5:return[2]}})})},e.prototype.punchedCOPSalesOrderPost=function(e){try{var t=btoa(this.loginService.user+\":\"+this.loginService.pass),r={headers:new n.g({\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"Basic \"+t})};return console.log(this.TAG,\"punched COP Sales Order Post FINAL\",e),this.genericHTTP.post(a.a.DOMAIN_URL+\"/openbravo/ws/in.mbs.webservice.CustomerServiceInsert?\",e,r)}catch(i){}},e.prototype.getAddress=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(t){try{return[2,this.genericHTTP.get(this.loginService.commonurl+\"org.openbravo.service.json.jsonrest/BusinessPartner?\"+this.loginService.ReadOnlyparameter+\"&_selectedProperties=id,name,shipToAddress,invoiceToAddress&_where=active=true%20and%20name='\"+e+\"'\")]}catch(r){}return[2]})})},e.prototype.finalCloser=function(e){try{var t=btoa(this.loginService.user+\":\"+this.loginService.pass),r={headers:new n.g({\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"Basic \"+t})},i={complaintno:e.complaint_no,complaintid:e.complaintid,doctype:e.doctype,nameofcomplainer:e.nameofcomplainer,desofcomplnr:e.desofcomplnr,contnumber:e.contnumber,email:e.email,eventdate:e.eventdate,serialno:e.serialno,srnoequipment:e.srnoequipment,contracttype:e.contracttype,invoiceno:e.invoiceno,invoicedate:e.invoicedate,errorcode:e.errorcode,dealername:e.dealername,installationdate:e.installationdate,skucode:e.skucode,skuname:e.skuname,brandname:e.brandname,producttobereturn:e.producttobereturn,custname:e.custname,add1:e.add1,add2:e.add2,add3:e.add3,pincode:e.pincode,area:e.area,city:e.city,state:e.state,country:e.country,description:e.description,lotno:e.lotno?e.lotno:\"\",appcomplaint:e.appcomplaint,assigntoservvendor:e.assigntoservvendor,salesrepresentative:e.salesrepresentative,newdealername:e.newdealername,serviceengname:e.serviceengname,serviceengcontact:e.serviceengcontact,visitdate:e.visitdate,assigntoservmg:e.assigntoservmg,activity:this.loginService.selectedactivity.id,Appect:e.Appect,problemobserv:e.problem_observed,fieldvisit:e.field_visit_remarks,proposeactn:e.proposed_action,assigntofieldvisit:e.assign_to,closureatfield:e.closureatfield,compltstatus:e.complaint_status,imagebase64:e.imagebase64,file_type:e.file_type};if(e.spare_received_date&&(i.sparesinstall=[{recvdate:e.spare_received_date,repairreport:e.repair_report,compltstatus:e.complaint_status,compltndate:e.complaint_date,replacesparepartno:e.replaced_spare_part_serialNo,serviceattendedby:e.service_attended,defectivepartno:e.defective_spare_part_no,docketno:e.def_spare_docket_no,courier:e.def_spare_courier,sentdate:e.def_spare_sent_date,spareinstallclose:e.spare_install_closed}]),e.servicevendorremark&&(i.needtosendcah=[{sermangremarks:e.servicevendorremark,defsparepartno:e.defective_spare_part_no,defsparerecevdate:e.defective_spare_part_received_date,refno:e.smart_solve_ref_no}]),console.log(this.TAG,\"FINAL Closure API Data Service\",i),\"image\"==e.file_type)return this.genericHTTP.post(a.a.DOMAIN_URL+\"/openbravo/ws/in.mbs.webservice.CustomerServiceInsert?\",i,r);if(\"pdf\"==e.file_type){if(1==this.msg.isplatformweb){var s=new FormData,o=JSON.stringify(i);s.append(\"postData\",o),s.append(\"imagebase64\",i.imagebase64,i.imagebase64.name),s.append(\"file_type\",e.file_type);var c=btoa(this.loginService.user+\":\"+this.loginService.pass),p={headers:new n.g({Authorization:\"Basic \"+c})};return console.log(this.TAG,\"final Closer With Pdf Final Data\",s),this.genericHTTP.fileDevicePost(a.a.DOMAIN_URL+\"/openbravo/ws/in.mbs.webservice.CustomerServiceInsert?\",s,p)}if(this.platform.is(\"android\"))this.uploadPDFFileServiceAndroidiOS(i,e.file_selected_uri).then(function(e){});else if(this.platform.is(\"ios\"))return this.uploadPDFFileiOS(i,e.file_selected_uri)}}catch(d){}},e.prototype.finalCloserWithPdf=function(e){try{var t=btoa(this.loginService.user+\":\"+this.loginService.pass),r={headers:new n.g({Authorization:\"Basic \"+t})};return console.log(this.TAG,\"final Closer With Pdf Final Data\",e),this.genericHTTP.fileDevicePost(a.a.DOMAIN_URL+\"/openbravo/ws/in.mbs.webservice.CustomerServiceInsert?\",e,r)}catch(i){}},e.prototype.uploadPDFFileServiceAndroidiOS=function(e,t){var r=this;try{var i=this.loginService.user,o=this.loginService.pass;this.cordovaHTTP.setDataSerializer(\"multipart\");var c=[t],p=btoa(i+\":\"+o),d={Authorization:new n.g({Authorization:\"Basic \"+p}).get(\"Authorization\")};console.log(this.TAG,\"file upload data\",e);var l=a.a.DOMAIN_URL+\"/openbravo/ws/in.mbs.webservice.CustomerServiceInsert?\";return s.Observable.create(function(t){r.cordovaHTTP.uploadFile(l,e,d,c,\"imagebase64\").then(function(e){var r;r=e.data?JSON.parse(e.data):e,t.next(r),t.complete()}).catch(function(e){throw console.log(r.TAG,\"file upload error\",e),e})})}catch(v){console.log(this.TAG,v)}},e.prototype.uploadPDFFileiOS=function(e,t){try{var r=btoa(this.loginService.user+\":\"+this.loginService.pass),i=a.a.DOMAIN_URL+\"/openbravo/ws/in.mbs.webservice.WMobileOrderPunchOB?\";this.transfer.create().upload(t,i,{fileKey:\"imagebase64\",fileName:e.fileName,params:e,headers:{Authorization:\"Basic \"+r}}).then(function(e){console.log(\"pravin YESSSSS\",e);var t=JSON.parse(e.response);console.log(\"File Uplaod Result\",t)},function(e){})}catch(s){console.log(this.TAG,s)}},e.prototype.serviceManagerClose=function(e){try{var t=btoa(this.loginService.user+\":\"+this.loginService.pass),r={headers:new n.g({\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"Basic \"+t})},i={complaintno:e.complaint_no,complaintid:e.complaintid,doctype:e.doctype,nameofcomplainer:e.nameofcomplainer,desofcomplnr:e.desofcomplnr,contnumber:e.contnumber,email:e.email,eventdate:e.eventdate,serialno:e.serialno,srnoequipment:e.srnoequipment,contracttype:e.contracttype,invoiceno:e.invoiceno,invoicedate:e.invoicedate,errorcode:e.errorcode,dealername:e.dealername,installationdate:e.installationdate,skucode:e.skucode,skuname:e.skuname,brandname:e.brandname,producttobereturn:e.producttobereturn,custname:e.custname,add1:e.add1,add2:e.add2,add3:e.add3,pincode:e.pincode,area:e.area,city:e.city,state:e.state,country:e.country,description:e.description,lotno:e.lotno?e.lotno:\"\",appcomplaint:e.appcomplaint,assigntoservvendor:e.assigntoservvendor,salesrepresentative:e.salesrepresentative,newdealername:e.newdealername,serviceengname:e.serviceengname,serviceengcontact:e.serviceengcontact,visitdate:e.visitdate,servicevendorremark:e.servicevendorremark,assigntoservmg:e.assigntoservmg,activity:this.loginService.selectedactivity.id,Appect:e.Appect,problemobserv:e.problem_observed,fieldvisit:e.field_visit_remarks,assigntofieldvisit:e.assign_to};return e.servicevendorremark&&(i.needtosendcah=[{sermangremarks:e.servicevendorremark,defsparepartno:e.defective_spare_part_no,defsparerecevdate:e.defective_spare_part_received_date,refno:e.smart_solve_ref_no}]),this.genericHTTP.post(a.a.DOMAIN_URL+\"/openbravo/ws/in.mbs.webservice.CustomerServiceInsert?\",i,r)}catch(s){}},e.prototype.spareInstallSaveToOB=function(e){try{var t=btoa(this.loginService.user+\":\"+this.loginService.pass),r={headers:new n.g({\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"Basic \"+t})},i={complaintno:e.complaint_no,complaintid:e.complaintid,activity:this.loginService.selectedactivity.id,problemobserv:e.problem_observed,fieldvisit:e.field_visit_remarks,proposeactn:e.proposed_action};return i.sparesinstall=[{recvdate:e.spare_received_date,repairreport:e.repair_report,compltstatus:e.complaint_status,compltndate:e.complaint_date,replacesparepartno:e.replaced_spare_part_serialNo,serviceattendedby:e.service_attended,defectivepartno:e.defective_spare_part_no,docketno:e.def_spare_docket_no,courier:e.def_spare_courier,sentdate:e.def_spare_sent_date,spareinstallclose:e.spare_install_closed,orderid:e.orderid,sapreskuid:e.sapreskuid,qty:e.qty,sparerequiredid:e.sparerequiredid}],console.log(this.TAG,\"FINAL Spare Install API Data\",i),this.genericHTTP.post(a.a.DOMAIN_URL+\"/openbravo/ws/in.mbs.webservice.CustomerServiceInsert?\",i,r)}catch(s){throw s}},e.prototype.getErrorCodeList=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t,r,n=this;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e=a.a.DOMAIN_URL+\"/openbravo/ws/in.mbs.webservice.ListOfvalues?user_id=\"+this.loginService.userid+\"&type=EC\",this.errorCodeList?[2,s.Observable.create(function(e){e.next(n.errorCodeList),e.complete()})]:[3,1];case 1:return t=this,[4,this.genericHTTP.get(e).toPromise()];case 2:return t.errorCodeList=i.sent(),[2,s.Observable.create(function(e){e.next(n.errorCodeList),e.complete()})];case 3:return[3,5];case 4:return r=i.sent(),console.error(this.TAG,r),[3,5];case 5:return[2]}})})},e.prototype.loadMasterData=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t,r,s,n;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,9,,10]),e=this,[4,this.getProposedActionList()];case 1:return[4,i.sent().toPromise()];case 2:return e.proposedActionList=i.sent(),t=this,[4,this.getComplaintStatus()];case 3:return[4,i.sent().toPromise()];case 4:return t.complaintStatusList=i.sent(),r=this,[4,this.getErrorCodeList()];case 5:return[4,i.sent().toPromise()];case 6:return r.errorCodeList=i.sent(),s=this,[4,this.getServiceManagerList()];case 7:return[4,i.sent().toPromise()];case 8:return s.serviceManagerList=i.sent(),[3,10];case 9:return n=i.sent(),console.log(this.TAG,n),[3,10];case 10:return[2]}})})},e.prototype.getCustomerServiceDetailById=function(e){try{return this.genericHTTP.get(a.a.DOMAIN_URL+\"/openbravo/ws/in.mbs.webservice.CustomerServiceDetails?userid=\"+this.loginService.userid+\"&appcomplaint=N&servmanager=N&serveng=Y&sparesku=Y&activity=\"+this.loginService.selectedactivity.id+\"&complaint_id=\"+e)}catch(t){console.log(this.TAG,t)}},e.ngInjectableDef=u.Wb({factory:function(){return new e(u.Xb(o.a),u.Xb(c.a),u.Xb(n.c),u.Xb(p.a),u.Xb(d.a),u.Xb(l.Pb),u.Xb(v.a))},token:e,providedIn:\"root\"}),e}()}}]);","extractedComments":[]}