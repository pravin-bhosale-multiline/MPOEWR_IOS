{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{\"ANN+\":function(e,t,n){\"use strict\";n.r(t);var s=n(\"8Y7J\");class i{}var o=n(\"pMnS\"),l=n(\"oBZk\"),r=n(\"ZZ/e\"),a=n(\"mrSG\"),c=n(\"Ztuw\"),u=n(\"CStz\"),h=n(\"9B/o\"),p=n(\"EOHu\"),d=n(\"t8sF\"),g=n(\"wMzM\"),m=n(\"4zgz\"),b=n(\"Dc/3\"),f=n(\"jtHE\"),v=n(\"VRyK\"),y=n(\"eIep\"),E=n(\"lJxs\");const C={schedule(e,t){const n=setTimeout(e,t);return()=>clearTimeout(n)},scheduleBeforeRender(e){if(\"undefined\"==typeof window)return C.schedule(e,0);if(void 0===window.requestAnimationFrame)return C.schedule(e,16);const t=window.requestAnimationFrame(e);return()=>window.cancelAnimationFrame(t)}};let w;function k(e,t,n){let s=n;return function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE}(e)&&t.some((t,n)=>!(\"*\"===t||!function(t,n){if(!w){const e=Element.prototype;w=e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}return e.nodeType===Node.ELEMENT_NODE&&w.call(e,n)}(0,t)||(s=n,0))),s}const x=10;class S{constructor(e,t){this.componentFactory=t.get(s.j).resolveComponentFactory(e)}create(e){return new j(this.componentFactory,e)}}class j{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new f.a(1),this.events=this.eventEmitters.pipe(Object(y.a)(e=>Object(v.a)(...e))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:e})=>e)),this.ngZone=this.injector.get(s.x),this.elementZone=\"undefined\"==typeof Zone?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null!==this.componentRef&&null===this.scheduledDestroyFn&&(this.scheduledDestroyFn=C.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},x))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t){this.runInZone(()=>{null!==this.componentRef?(!function(e,t){return e===t||e!=e&&t!=t}(t,this.getInputValue(e))||void 0===t&&this.unchangedInputs.has(e))&&(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=s.p.create({providers:[],parent:this.injector}),n=function(t,n){const s=e.childNodes,i=n.map(()=>[]);let o=-1;n.some((e,t)=>\"*\"===e&&(o=t,!0));for(let e=0,l=s.length;e<l;++e){const t=s[e],l=k(t,n,o);-1!==l&&i[l].push(t)}return i}(0,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,n,e),this.viewChangeDetectorRef=this.componentRef.injector.get(s.h),this.implementsOnChanges=\"function\"==typeof this.componentRef.instance.ngOnChanges,this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(s.g).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e))}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:t,templateName:n})=>e.instance[t].pipe(Object(E.a)(e=>({name:n,value:e}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=C.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const n=this.inputChanges[e];if(n)return void(n.currentValue=t);const i=this.unchangedInputs.has(e),o=i?void 0:this.getInputValue(e);this.inputChanges[e]=new s.I(o,t,i)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class R extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}function F(e,t){const n=function(e,n){return t.injector.get(s.j).resolveComponentFactory(e).inputs}(e),i=t.strategyFactory||new S(e,t.injector),o=function(e){const t={};return e.forEach(({propName:e,templateName:n})=>{t[function(e){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}()]=e}),t}(n);class l extends R{constructor(e){super(),this.injector=e}get ngElementStrategy(){if(!this._ngElementStrategy){const e=this._ngElementStrategy=i.create(this.injector||t.injector);n.forEach(({propName:t})=>{if(!this.hasOwnProperty(t))return;const n=this[t];delete this[t],e.setInputValue(t,n)})}return this._ngElementStrategy}attributeChangedCallback(e,t,n,s){this.ngElementStrategy.setInputValue(o[e],n)}connectedCallback(){let e=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),e=!0),this.ngElementStrategy.connect(this),e||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(e=>{const t=function(e,t,n){if(\"function\"!=typeof CustomEvent){const s=e.createEvent(\"CustomEvent\");return s.initCustomEvent(t,!1,!1,n),s}return new CustomEvent(t,{bubbles:!1,cancelable:!1,detail:n})}(this.ownerDocument,e.name,e.value);this.dispatchEvent(t)})}}return l.observedAttributes=Object.keys(o),n.forEach(({propName:e})=>{Object.defineProperty(l.prototype,e,{get(){return this.ngElementStrategy.getInputValue(e)},set(t){this.ngElementStrategy.setInputValue(e,t)},configurable:!0,enumerable:!0})}),l}var I=n(\"sRmb\");class O{constructor(e,t,n,s,i,o,l,r,a,c,u,h,p,d,g){this.route=e,this.sanitizer=t,this.loginservc=n,this.router=s,this.storage=i,this.singleselservc=o,this.iab=l,this.androidPermissions=r,this.msg=a,this.nativefile=c,this.platform=u,this.fileOpener=h,this.commonFunction=p,this.alertCtrl=d,this.injector=g,this.TAG=\"Report Page\",this.txtTitle=\"Report\",this.btnName=\"Excel\",this.options={location:\"no\",hidden:\"yes\",clearcache:\"yes\",clearsessioncache:\"yes\",zoom:\"yes\",hardwareback:\"yes\",mediaPlaybackRequiresUserAction:\"no\",shouldPauseOnSuspend:\"no\",closebuttoncaption:\"Close\",disallowoverscroll:\"no\",toolbar:\"yes\",enableViewportScale:\"no\",allowInlineMediaPlayback:\"no\",presentationstyle:\"pagesheet\",fullscreen:\"yes\"},this.options1={location:\"yes\",hidden:\"no\",clearcache:\"yes\",clearsessioncache:\"yes\",zoom:\"yes\",hardwareback:\"yes\",mediaPlaybackRequiresUserAction:\"no\",shouldPauseOnSuspend:\"no\",closebuttoncaption:\"Close\",disallowoverscroll:\"no\",toolbar:\"yes\",enableViewportScale:\"no\",allowInlineMediaPlayback:\"no\",presentationstyle:\"pagesheet\",fullscreen:\"yes\"}}ngOnInit(){this.route.params.subscribe(e=>{this.rptid=e.rptid,this.loginservc.getReportPara(this.rptid).subscribe(e=>{this.rptparalist=e.data,this.loginservc.reportjson.org=this.loginservc.selectedprof.organization,this.loginservc.reportjson.user=this.loginservc.selectedprof.user,this.loginservc.reportjson.role=this.loginservc.selectedprof.role,this.loginservc.reportjson.client=this.loginservc.selectedprof.client,this.loginservc.reportjson.wh=this.loginservc.selectedprof.warehouse,this.loginservc.reportjson.rptid=this.rptid;for(let t of this.rptparalist)if(void 0===this.loginservc.reportjson[t.inppara]&&(this.loginservc.reportjson[t.inppara]=t[t.inppara]),!this.loginservc.iscutsomdefined&&t.issamepagemultiselect){const e=F(I.a,{injector:this.injector});customElements.define(\"app-listcontrol\",e),this.loginservc.iscutsomdefined=!0}this.loginservc.GetReportPage(this.loginservc.reportjson).subscribe(e=>{console.log(\"Report Page\",e),this.file_name=e.report_name,this.txtTitle=this.file_name.substring(0,this.file_name.lastIndexOf(\".\")),this.fileType=this.file_name.substring(this.file_name.lastIndexOf(\".\")+1),\"pdf\"==this.fileType&&(this.btnName=\"PDF\"),this.innerhtml=this.sanitizer.bypassSecurityTrustHtml(e.data),this.loginservc.getReportPara(this.rptid).subscribe(e=>{this.rptparalist=e.data;for(let n of this.rptparalist){var t=document.getElementById(n.inppara);t&&(n.isdependend?t.addEventListener(\"LST\"===n.scontroltype&&n.issamepagemultiselect?\"click\":\"focusin\",this.onReload.bind(this,n)):t.addEventListener(\"focusin\",this.onChange.bind(this,n)),(\"SLS\"===n.scontroltype||\"LST\"===n.scontroltype&&!n.issamepagemultiselect)&&t.addEventListener(\"click\",this.onSLSClick.bind(this,n.scontroltype)))}console.log(this.loginservc.reportjson)})})})})}onClickEmail(){this.loginservc.reportjson.inpexcel=\"N\",this.loginservc.sendEmailReport(this.loginservc.reportjson).subscribe(e=>{this.response=e.response,void 0!==this.response.messageType?\"success\"===this.response.messageType&&(this.txtmessage=this.response.messageText,this.txterror=void 0):(this.txterror=this.response.error.message,this.txtmessage=void 0,this.txterror=this.txterror.split(\"Where\")[0])},e=>{this.txterror=e.message,this.txterror=this.txterror.split(\"Where\")[0],this.txtmessage=void 0})}onClickExcelPDF(){this.loginservc.reportjson.inpexcel=\"Y\",this.commonFunction.loadingPresent(),this.loginservc.downloadExcelPDF(this.loginservc.reportjson).subscribe(e=>{if(this.commonFunction.loadingDismiss(),console.log(e),0!=e.size){let t=e.type,n=new Blob([e],{type:t}),s=\"mydoc\";if(\"text/csv\"===t)s=this.loginservc.selectedreport._identifier+\".csv\";else{if(\"application/json\"===t)return void this.commonFunction.presentAlert(\"Error\",\"Error\",\"Error On Downloading Report\");s=this.loginservc.selectedreport._identifier+\".pdf\"}const i=window.URL.createObjectURL(n);if(this.commonFunction.presentAlert(\"Message\",\"Success\",\"Downloaded Complete.\"),this.msg.isplatformweb){let e=document.createElement(\"a\");document.body.appendChild(e),e.href=i,e.download=s,e.click(),window.URL.revokeObjectURL(i)}let o;this.platform.is(\"ios\")&&(o=this.nativefile.documentsDirectory),this.platform.is(\"android\")&&(o=this.nativefile.externalDataDirectory),this.msg.isplatformweb||this.nativefile.writeFile(o,s,n,{replace:!0}).then(()=>this.fileOpener.open(o+s,t)).catch(e=>{this.commonFunction.presentAlert(\"Message\",\"Alert\",e)})}else this.commonFunction.presentAlert(\"Message\",\"Alert\",\"File not Downloaded.\")},e=>{this.txterror=e.message,this.txterror=this.txterror.split(\"Where\")[0],this.txtmessage=void 0})}onReload(e,t){this.loginservc.reportjson[t.target.id]===t.target.value&&\"LST\"!==e.scontroltype||(this.loginservc.reportjson[t.target.id]=void 0===t.target.value?\"\":t.target.value,void 0!==t.target.value&&\"\"!==t.target.value&&(this.loginservc.reportjson[t.target.id]=t.target.value,this.loginservc.GetReportPage(this.loginservc.reportjson).subscribe(e=>{this.innerhtml=this.sanitizer.bypassSecurityTrustHtml(e.data),this.loginservc.getReportPara(this.rptid).subscribe(e=>{this.rptparalist=e.data;for(let n of this.rptparalist){var t=document.getElementById(n.inppara);t&&(n.isdependend?t.addEventListener(\"LST\"===n.scontroltype&&n.issamepagemultiselect?\"click\":\"focusin\",this.onReload.bind(this,n)):t.addEventListener(\"focusin\",this.onChange.bind(this,n)),(\"SLS\"===n.scontroltype||\"LST\"===n.scontroltype&&!n.issamepagemultiselect)&&t.addEventListener(\"click\",this.onSLSClick.bind(this,n.scontroltype)))}})})))}onChange(e,t){console.log(\"onchangecurr\",this.loginservc.reportjson),this.txtmessage=void 0,this.txterror=void 0,void 0!==t.target.value&&(this.loginservc.reportjson[t.target.id]=t.target.value)}onSLSClick(e,t){this.singleselservc.json=this.loginservc.reportjson,this.router.navigate([\"/selectorsingle\",this.rptid,t.target.id,e])}presentAlert(e,t,n,s){return a.__awaiter(this,void 0,void 0,function*(){const i=yield this.alertCtrl.create({header:e,subHeader:t,message:n,buttons:[{text:\"Cancel\",handler:()=>{console.log(\"Confirm Okay\")}},{text:\"Okay\",handler:e=>{let t;t=\"pdf\"==this.fileType?\"application/pdf\":\"text/csv\",this.fileOpener.open(s.toURL(),t).then(()=>console.log(\"File is opened\")).catch(e=>console.log(\"Error opening file\",e))}}]});i.dismiss(()=>console.log(\"The alert has been closed.\")),yield i.present()})}}var D=n(\"iInd\"),L=n(\"cUpR\"),T=n(\"xgBC\"),N=s.sb({encapsulation:0,styles:[[\"\"]],data:{}});function V(e){return s.Qb(0,[(e()(),s.ub(0,0,null,null,17,\"ion-header\",[],null,null,null,l.qb,l.s)),s.tb(1,49152,null,0,r.E,[s.h,s.k,s.x],null,null),(e()(),s.ub(2,0,null,0,9,\"ion-toolbar\",[[\"color\",\"primary\"]],null,null,null,l.Ub,l.W)),s.tb(3,49152,null,0,r.Fb,[s.h,s.k,s.x],{color:[0,\"color\"]},null),(e()(),s.ub(4,0,null,0,2,\"ion-title\",[],null,null,null,l.Sb,l.U)),s.tb(5,49152,null,0,r.Db,[s.h,s.k,s.x],null,null),(e()(),s.Ob(6,0,[\"\",\"\"])),(e()(),s.ub(7,0,null,0,4,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,l.db,l.f)),s.tb(8,49152,null,0,r.o,[s.h,s.k,s.x],null,null),(e()(),s.ub(9,0,null,0,2,\"ion-back-button\",[[\"defaultHref\",\"reportcategory\"]],null,[[null,\"click\"]],function(e,t,n){var i=!0;return\"click\"===t&&(i=!1!==s.Gb(e,11).onClick(n)&&i),i},l.ab,l.c)),s.tb(10,49152,null,0,r.j,[s.h,s.k,s.x],{defaultHref:[0,\"defaultHref\"]},null),s.tb(11,16384,null,0,r.k,[[2,r.lb],r.Mb],{defaultHref:[0,\"defaultHref\"]},null),(e()(),s.ub(12,0,null,0,2,\"ion-text\",[[\"color\",\"danger\"]],null,null,null,l.Qb,l.S)),s.tb(13,49152,null,0,r.Ab,[s.h,s.k,s.x],{color:[0,\"color\"]},null),(e()(),s.Ob(14,0,[\"\",\"\"])),(e()(),s.ub(15,0,null,0,2,\"ion-text\",[[\"color\",\"warning\"]],null,null,null,l.Qb,l.S)),s.tb(16,49152,null,0,r.Ab,[s.h,s.k,s.x],{color:[0,\"color\"]},null),(e()(),s.Ob(17,0,[\"\",\"\"])),(e()(),s.ub(18,0,null,null,14,\"ion-content\",[],null,null,null,l.lb,l.n)),s.tb(19,49152,null,0,r.x,[s.h,s.k,s.x],null,null),(e()(),s.ub(20,0,null,0,0,\"div\",[],[[8,\"innerHTML\",1]],null,null,null,null)),(e()(),s.ub(21,0,null,0,11,\"ion-row\",[],null,null,null,l.Kb,l.M)),s.tb(22,49152,null,0,r.mb,[s.h,s.k,s.x],null,null),(e()(),s.ub(23,0,null,0,4,\"ion-col\",[[\"class\",\"ion-text-right\"]],null,null,null,l.kb,l.m)),s.tb(24,49152,null,0,r.w,[s.h,s.k,s.x],null,null),(e()(),s.ub(25,0,null,0,2,\"ion-button\",[],null,[[null,\"click\"]],function(e,t,n){var s=!0;return\"click\"===t&&(s=!1!==e.component.onClickEmail()&&s),s},l.cb,l.e)),s.tb(26,49152,null,0,r.n,[s.h,s.k,s.x],null,null),(e()(),s.Ob(-1,0,[\" Email \"])),(e()(),s.ub(28,0,null,0,4,\"ion-col\",[[\"class\",\"ion-text-left\"]],null,null,null,l.kb,l.m)),s.tb(29,49152,null,0,r.w,[s.h,s.k,s.x],null,null),(e()(),s.ub(30,0,null,0,2,\"ion-button\",[],null,[[null,\"click\"]],function(e,t,n){var s=!0;return\"click\"===t&&(s=!1!==e.component.onClickExcelPDF()&&s),s},l.cb,l.e)),s.tb(31,49152,null,0,r.n,[s.h,s.k,s.x],null,null),(e()(),s.Ob(32,0,[\" \",\" \"]))],function(e,t){e(t,3,0,\"primary\"),e(t,10,0,\"reportcategory\"),e(t,11,0,\"reportcategory\"),e(t,13,0,\"danger\"),e(t,16,0,\"warning\")},function(e,t){var n=t.component;e(t,6,0,n.txtTitle),e(t,14,0,n.txterror),e(t,17,0,n.txtmessage),e(t,20,0,n.innerhtml),e(t,32,0,n.btnName)})}function P(e){return s.Qb(0,[(e()(),s.ub(0,0,null,null,1,\"app-report\",[],null,null,null,V,N)),s.tb(1,114688,null,0,O,[D.a,L.b,c.a,D.m,T.b,u.a,h.a,m.a,p.a,d.a,r.Pb,g.a,b.a,r.a,s.p],null,null)],function(e,t){e(t,1,0)},null)}var A=s.qb(\"app-report\",O,P,{},{},[]),z=n(\"ekNO\"),M=n(\"YODh\"),Z=n(\"SVse\"),_=n(\"s7LF\");class H{}var U=n(\"pYyI\"),B=n(\"A2Kn\"),q=n(\"j1ZV\");n.d(t,\"ReportPageModuleNgFactory\",function(){return Q});var Q=s.rb(i,[],function(e){return s.Db([s.Eb(512,s.j,s.cb,[[8,[o.a,A,z.a,z.b,M.a]],[3,s.j],s.v]),s.Eb(4608,Z.p,Z.o,[s.s,[2,Z.F]]),s.Eb(4608,_.A,_.A,[]),s.Eb(4608,r.b,r.b,[s.x,s.g]),s.Eb(4608,r.Lb,r.Lb,[r.b,s.j,s.p]),s.Eb(4608,r.Qb,r.Qb,[r.b,s.j,s.p]),s.Eb(1073742336,Z.c,Z.c,[]),s.Eb(1073742336,_.z,_.z,[]),s.Eb(1073742336,_.l,_.l,[]),s.Eb(1073742336,r.Hb,r.Hb,[]),s.Eb(1073742336,D.o,D.o,[[2,D.t],[2,D.m]]),s.Eb(1073742336,H,H,[]),s.Eb(1073742336,U.b,U.b,[]),s.Eb(1073742336,B.a,B.a,[]),s.Eb(1073742336,q.a,q.a,[]),s.Eb(1073742336,i,i,[]),s.Eb(1024,D.k,function(){return[[{path:\"\",component:O}]]},[])])})}}]);","extractedComments":[]}