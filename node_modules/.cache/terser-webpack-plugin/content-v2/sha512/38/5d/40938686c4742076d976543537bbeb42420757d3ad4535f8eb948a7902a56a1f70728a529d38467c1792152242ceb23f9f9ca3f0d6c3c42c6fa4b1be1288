{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{PgLg:function(l,n,t){\"use strict\";t.r(n);var e=t(\"CcnG\"),u=t(\"mrSG\"),i=t(\"Wjo3\"),o=t(\"gIcY\"),a=t(\"Dc/3\"),r=t(\"Ztuw\"),s=function(){function l(l,n,t,e,u,i){this.formBuilder=l,this.router=n,this.route=t,this.commonFunction=e,this.customerQuotationService=u,this.loginService=i,this.TAG=\"Add Edit Service Product Page\",this.isCardCollapse=1,this.prodSearchTextCount=0,this.tempCartProduct=[],this.btnSaveDisabled=!1}return l.prototype.ngOnInit=function(){this.addEditServiceProductForm=this.formBuilder.group({serialNoCtrl:[,o.y.required],quantityCtrl:[{value:\"\",disabled:!0},o.y.required]})},l.prototype.ionViewWillEnter=function(){var l=this;try{this.route.queryParams.subscribe(function(n){n.quotation_data&&n.quotation_data.length>0&&(l.selectedQuotationData=JSON.parse(n.quotation_data),l.selectedSerialNumberProductListQuotation=JSON.parse(n.selectedSerialNumberProductList),l.tempCartProduct=l.selectedSerialNumberProductListQuotation,l.selectedQuotationData&&l.selectedQuotationData.service_product_id.id&&l.customerQuotationService.getSerialNoProductList(l.selectedQuotationData.service_product_id.id,\"\").subscribe(function(n){n&&(n.length>l.loginService.minlistcount?l.tempSerialNumberLess10=[]:setTimeout(function(){l.tempSerialNumberLess10=n,1==l.tempSerialNumberLess10.length&&(l.addEditServiceProductForm.controls.serialNoCtrl.setValue(l.tempSerialNumberLess10[0]),l.selectedSerialNo=l.serialNoList[0])},100))}),l.tempCartProduct&&(l.btnSaveDisabled=!0))})}catch(n){}},l.prototype.onSerialNoClose=function(l){try{l.component.searchText=\"\"}catch(n){}},l.prototype.onSerialNoChange=function(l){try{null!=l.value&&(this.selectedSerialNo=l.value,this.addEditServiceProductForm.controls.quantityCtrl.setValue(1),l.component._searchText=\"\")}catch(n){}},l.prototype.onSerialNoSearch=function(l){try{this.prodSearchTextCount++;var n=l.text;n.length>=3?(this.prodSearchTextCount=0,this.bindSerialNoProduct(n)):this.serialNoList=this.tempSerialNumberLess10}catch(t){}},l.prototype.bindSerialNoProduct=function(l){return u.__awaiter(this,void 0,void 0,function(){var n=this;return u.__generator(this,function(t){try{\"\"!=l?this.customerQuotationService.getSerialNoProductList(this.selectedQuotationData.service_product_id.id,l).subscribe(function(l){n.serialNoList=l}):this.serialNoList=this.tempSerialNumberLess10}catch(e){}return[2]})})},l.prototype.removeProduct=function(l){try{var n=this.tempCartProduct.filter(function(n){return n.m_attributesetinstance_id!=l.m_attributesetinstance_id});this.tempCartProduct=n}catch(t){}},l.prototype.onSaveCart=function(){try{if(null!=this.tempCartProduct&&null!=this.tempCartProduct){var l={queryParams:{cartList:JSON.stringify(this.tempCartProduct),selectedQuotationData:JSON.stringify(this.selectedQuotationData)}};this.router.navigate([\"customer-quotation\"],l)}else this.commonFunction.presentAlert(\"Add Product\",\"Message!\",\"Your Cart Is Empty\")}catch(n){}},l.prototype.addToCart=function(){return u.__awaiter(this,void 0,void 0,function(){var l,n,t=this;return u.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),this.tempCartProduct?this.tempCartProduct.filter(function(l){return l.m_attributesetinstance_id==t.selectedSerialNo.m_attributesetinstance_id}).length>0?(this.commonFunction.presentAlert(\"Add Product\",\"Validation\",\"This product is already added with 1 quantity.\"),this.addEditServiceProductForm.controls.serialNoCtrl.reset(),[3,3]):[3,1]:[3,3];case 1:return[4,this.customerQuotationService.getSerialNoProductDetail(this.selectedQuotationData.selectedBusinessPartnerKey.id,this.selectedQuotationData.service_product_id.id,this.selectedQuotationData.bp_shiping_add_id.id,this.selectedQuotationData.bp_billing_add_id.id).toPromise()];case 2:l=e.sent(),this.tempCartProduct.push({m_attributesetinstance_id:this.selectedSerialNo.m_attributesetinstance_id,serialno:this.selectedSerialNo.serialno?this.selectedSerialNo.serialno:\"\",taxname:l.taxname?l.taxname:\"\",taxrate:l.taxrate?l.taxrate:\"\",taxid:l.taxid?l.taxid:\"\",totgrossamt:l.totgrossamt?l.totgrossamt:\"\",netamt:l.newamt?l.newamt:\"\",qty:\"1\",uomname:l.uomname?l.uomname:\"\",rate:l.rate?l.rate:\"\",c_uom_id:l.c_uom_id?l.c_uom_id:\"\"}),this.selectedSerialNo=\"\",this.addEditServiceProductForm.controls.serialNoCtrl.setValue(\"\"),this.addEditServiceProductForm.controls.quantityCtrl.setValue(\"\"),this.btnSaveDisabled=!0,e.label=3;case 3:return[3,5];case 4:return n=e.sent(),this.commonFunction.presentAlert(\"Add Product\",n.status,n.error),[3,5];case 5:return[2]}})})},l}(),c=function(){return function(){}}(),b=t(\"ekNO\"),d=t(\"pMnS\"),h=t(\"oBZk\"),m=t(\"ZZ/e\"),p=t(\"iVRy\"),g=t(\"Ip0R\"),C=t(\"ZYCi\"),S=e.vb({encapsulation:0,styles:[[\"\"]],data:{}});function v(l){return e.Tb(0,[(l()(),e.xb(0,0,null,null,6,\"ion-item\",[],null,null,null,h.xb,h.x)),e.wb(1,49152,null,0,m.K,[e.h,e.k,e.A],null,null),(l()(),e.xb(2,0,null,0,1,\"ion-icon\",[[\"name\",\"trash\"],[\"slot\",\"end\"]],null,[[null,\"click\"]],function(l,n,t){var e=!0;return\"click\"===n&&(e=!1!==l.component.removeProduct(l.context.$implicit)&&e),e},h.rb,h.t)),e.wb(3,49152,null,0,m.F,[e.h,e.k,e.A],{name:[0,\"name\"]},null),(l()(),e.xb(4,0,null,0,2,\"ion-label\",[],null,null,null,h.yb,h.A)),e.wb(5,49152,null,0,m.Q,[e.h,e.k,e.A],null,null),(l()(),e.Rb(6,0,[\"\",\"\"]))],function(l,n){l(n,3,0,\"trash\")},function(l,n){l(n,6,0,n.context.$implicit.serialno)})}function f(l){return e.Tb(0,[(l()(),e.xb(0,0,null,null,11,\"ion-header\",[],null,null,null,h.qb,h.s)),e.wb(1,49152,null,0,m.E,[e.h,e.k,e.A],null,null),(l()(),e.xb(2,0,null,0,9,\"ion-toolbar\",[],null,null,null,h.Ub,h.W)),e.wb(3,49152,null,0,m.Fb,[e.h,e.k,e.A],null,null),(l()(),e.xb(4,0,null,0,2,\"ion-title\",[],null,null,null,h.Sb,h.U)),e.wb(5,49152,null,0,m.Db,[e.h,e.k,e.A],null,null),(l()(),e.Rb(-1,0,[\"Add Serial No\"])),(l()(),e.xb(7,0,null,0,4,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,h.db,h.f)),e.wb(8,49152,null,0,m.o,[e.h,e.k,e.A],null,null),(l()(),e.xb(9,0,null,0,2,\"ion-back-button\",[],null,[[null,\"click\"]],function(l,n,t){var u=!0;return\"click\"===n&&(u=!1!==e.Jb(l,11).onClick(t)&&u),u},h.ab,h.c)),e.wb(10,49152,null,0,m.j,[e.h,e.k,e.A],null,null),e.wb(11,16384,null,0,m.k,[[2,m.lb],m.Mb],null,null),(l()(),e.xb(12,0,null,null,83,\"ion-content\",[],null,null,null,h.lb,h.n)),e.wb(13,49152,null,0,m.x,[e.h,e.k,e.A],null,null),(l()(),e.xb(14,0,null,0,81,\"form\",[[\"novalidate\",\"\"]],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngSubmit\"],[null,\"submit\"],[null,\"reset\"]],function(l,n,t){var u=!0,i=l.component;return\"submit\"===n&&(u=!1!==e.Jb(l,16).onSubmit(t)&&u),\"reset\"===n&&(u=!1!==e.Jb(l,16).onReset()&&u),\"ngSubmit\"===n&&(u=!1!==i.onSaveCart()&&u),u},null,null)),e.wb(15,16384,null,0,o.C,[],null,null),e.wb(16,540672,null,0,o.j,[[8,null],[8,null]],{form:[0,\"form\"]},{ngSubmit:\"ngSubmit\"}),e.Ob(2048,null,o.c,null,[o.j]),e.wb(18,16384,null,0,o.r,[[4,o.c]],null,null),(l()(),e.xb(19,0,null,null,61,\"ion-card\",[],null,null,null,h.ib,h.g)),e.wb(20,49152,null,0,m.p,[e.h,e.k,e.A],null,null),(l()(),e.xb(21,0,null,0,59,\"ion-card-content\",[],null,null,null,h.eb,h.h)),e.wb(22,49152,null,0,m.q,[e.h,e.k,e.A],null,null),(l()(),e.xb(23,0,null,0,57,\"ion-grid\",[],null,null,null,h.pb,h.r)),e.wb(24,49152,null,0,m.D,[e.h,e.k,e.A],null,null),(l()(),e.xb(25,0,null,0,28,\"ion-row\",[],null,null,null,h.Kb,h.M)),e.wb(26,49152,null,0,m.mb,[e.h,e.k,e.A],null,null),(l()(),e.xb(27,0,null,0,26,\"ion-col\",[],null,null,null,h.kb,h.m)),e.wb(28,49152,null,0,m.w,[e.h,e.k,e.A],null,null),(l()(),e.xb(29,0,null,0,24,\"ion-item\",[],null,null,null,h.xb,h.x)),e.wb(30,49152,null,0,m.K,[e.h,e.k,e.A],null,null),(l()(),e.xb(31,0,null,0,2,\"ion-label\",[[\"position\",\"stacked\"]],null,null,null,h.yb,h.A)),e.wb(32,49152,null,0,m.Q,[e.h,e.k,e.A],{position:[0,\"position\"]},null),(l()(),e.Rb(-1,0,[\"Serial No\"])),(l()(),e.xb(34,0,null,0,19,\"ionic-selectable\",[[\"itemTextField\",\"serialno\"],[\"itemValueField\",\"m_attributesetinstance_id\"],[\"placeholder\",\"Select Serial No\"]],[[2,\"ionic-selectable\",null],[2,\"ionic-selectable-ios\",null],[2,\"ionic-selectable-md\",null],[2,\"ionic-selectable-is-multiple\",null],[2,\"ionic-selectable-has-value\",null],[2,\"ionic-selectable-has-placeholder\",null],[2,\"ionic-selectable-has-label\",null],[2,\"ionic-selectable-label-default\",null],[2,\"ionic-selectable-label-fixed\",null],[2,\"ionic-selectable-label-stacked\",null],[2,\"ionic-selectable-label-floating\",null],[2,\"ionic-selectable-is-enabled\",null],[2,\"ionic-selectable-can-clear\",null],[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"onChange\"],[null,\"onClose\"],[null,\"onSearch\"]],function(l,n,t){var e=!0,u=l.component;return\"onChange\"===n&&(e=!1!==u.onSerialNoChange(t)&&e),\"onClose\"===n&&(e=!1!==u.onSerialNoClose(t)&&e),\"onSearch\"===n&&(e=!1!==u.onSerialNoSearch(t)&&e),e},b.d,b.c)),e.wb(35,376832,null,14,p.a,[m.Lb,m.Pb,[2,m.K],e.t,e.k,e.F],{items:[0,\"items\"],itemValueField:[1,\"itemValueField\"],itemTextField:[2,\"itemTextField\"],canSearch:[3,\"canSearch\"],placeholder:[4,\"placeholder\"],searchDebounce:[5,\"searchDebounce\"],shouldStoreItemValue:[6,\"shouldStoreItemValue\"]},{onChange:\"onChange\",onSearch:\"onSearch\",onClose:\"onClose\"}),e.Pb(603979776,1,{valueTemplate:0}),e.Pb(603979776,2,{itemTemplate:0}),e.Pb(603979776,3,{itemEndTemplate:0}),e.Pb(603979776,4,{titleTemplate:0}),e.Pb(603979776,5,{placeholderTemplate:0}),e.Pb(603979776,6,{messageTemplate:0}),e.Pb(603979776,7,{groupTemplate:0}),e.Pb(603979776,8,{groupEndTemplate:0}),e.Pb(603979776,9,{closeButtonTemplate:0}),e.Pb(603979776,10,{searchFailTemplate:0}),e.Pb(603979776,11,{addItemTemplate:0}),e.Pb(603979776,12,{footerTemplate:0}),e.Pb(603979776,13,{headerTemplate:0}),e.Pb(603979776,14,{itemIconTemplate:0}),e.Ob(1024,null,o.o,function(l){return[l]},[p.a]),e.wb(51,540672,null,0,o.h,[[8,null],[8,null],[6,o.o],[2,o.B]],{form:[0,\"form\"]},null),e.Ob(2048,null,o.p,null,[o.h]),e.wb(53,16384,null,0,o.q,[[4,o.p]],null,null),(l()(),e.xb(54,0,null,0,13,\"ion-row\",[],null,null,null,h.Kb,h.M)),e.wb(55,49152,null,0,m.mb,[e.h,e.k,e.A],null,null),(l()(),e.xb(56,0,null,0,11,\"ion-item\",[],null,null,null,h.xb,h.x)),e.wb(57,49152,null,0,m.K,[e.h,e.k,e.A],null,null),(l()(),e.xb(58,0,null,0,2,\"ion-label\",[[\"position\",\"floating\"]],null,null,null,h.yb,h.A)),e.wb(59,49152,null,0,m.Q,[e.h,e.k,e.A],{position:[0,\"position\"]},null),(l()(),e.Rb(-1,0,[\"Quantity\"])),(l()(),e.xb(61,0,null,0,6,\"ion-input\",[[\"type\",\"number\"]],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ionBlur\"],[null,\"ionChange\"]],function(l,n,t){var u=!0;return\"ionBlur\"===n&&(u=!1!==e.Jb(l,62)._handleBlurEvent(t.target)&&u),\"ionChange\"===n&&(u=!1!==e.Jb(l,62)._handleIonChange(t.target)&&u),u},h.ub,h.w)),e.wb(62,16384,null,0,m.Ob,[e.k],null,null),e.Ob(1024,null,o.o,function(l){return[l]},[m.Ob]),e.wb(64,540672,null,0,o.h,[[8,null],[8,null],[6,o.o],[2,o.B]],{form:[0,\"form\"]},null),e.Ob(2048,null,o.p,null,[o.h]),e.wb(66,16384,null,0,o.q,[[4,o.p]],null,null),e.wb(67,49152,null,0,m.J,[e.h,e.k,e.A],{type:[0,\"type\"]},null),(l()(),e.xb(68,0,null,0,12,\"ion-row\",[],null,null,null,h.Kb,h.M)),e.wb(69,49152,null,0,m.mb,[e.h,e.k,e.A],null,null),(l()(),e.xb(70,0,null,0,10,\"ion-item\",[[\"float-right\",\"\"],[\"lines\",\"none\"]],null,null,null,h.xb,h.x)),e.wb(71,49152,null,0,m.K,[e.h,e.k,e.A],{lines:[0,\"lines\"]},null),e.wb(72,16384,null,0,m.e,[e.k],null,null),(l()(),e.xb(73,0,null,0,3,\"ion-button\",[[\"color\",\"primary\"],[\"text-center\",\"\"]],null,[[null,\"click\"]],function(l,n,t){var e=!0;return\"click\"===n&&(e=!1!==l.component.addToCart()&&e),e},h.cb,h.e)),e.wb(74,49152,null,0,m.n,[e.h,e.k,e.A],{color:[0,\"color\"],disabled:[1,\"disabled\"]},null),e.wb(75,16384,null,0,m.e,[e.k],null,null),(l()(),e.Rb(-1,0,[\"Add to cart\"])),(l()(),e.xb(77,0,null,0,3,\"ion-button\",[[\"color\",\"primary\"],[\"text-center\",\"\"]],null,[[null,\"click\"]],function(l,n,t){var e=!0;return\"click\"===n&&(e=!1!==l.component.onSaveCart()&&e),e},h.cb,h.e)),e.wb(78,49152,null,0,m.n,[e.h,e.k,e.A],{color:[0,\"color\"],disabled:[1,\"disabled\"]},null),e.wb(79,16384,null,0,m.e,[e.k],null,null),(l()(),e.Rb(-1,0,[\"Save\"])),(l()(),e.xb(81,0,null,null,14,\"ion-card\",[],null,null,null,h.ib,h.g)),e.wb(82,49152,null,0,m.p,[e.h,e.k,e.A],null,null),(l()(),e.xb(83,0,null,0,8,\"ion-card-header\",[],null,null,null,h.fb,h.i)),e.wb(84,49152,null,0,m.r,[e.h,e.k,e.A],null,null),(l()(),e.xb(85,0,null,0,6,\"ion-item\",[[\"color\",\"medium\"],[\"lines\",\"none\"]],null,null,null,h.xb,h.x)),e.wb(86,49152,null,0,m.K,[e.h,e.k,e.A],{color:[0,\"color\"],lines:[1,\"lines\"]},null),(l()(),e.xb(87,0,null,0,2,\"ion-label\",[],null,null,null,h.yb,h.A)),e.wb(88,49152,null,0,m.Q,[e.h,e.k,e.A],null,null),(l()(),e.Rb(-1,0,[\"Serial No\"])),(l()(),e.xb(90,0,null,0,1,\"ion-icon\",[[\"name\",\"cart\"],[\"slot\",\"start\"]],null,null,null,h.rb,h.t)),e.wb(91,49152,null,0,m.F,[e.h,e.k,e.A],{name:[0,\"name\"]},null),(l()(),e.xb(92,0,null,0,3,\"ion-card-content\",[],null,null,null,h.eb,h.h)),e.wb(93,49152,null,0,m.q,[e.h,e.k,e.A],null,null),(l()(),e.mb(16777216,null,0,1,null,v)),e.wb(95,278528,null,0,g.m,[e.S,e.P,e.t],{ngForOf:[0,\"ngForOf\"]},null)],function(l,n){var t=n.component;l(n,16,0,t.addEditServiceProductForm),l(n,32,0,\"stacked\"),l(n,35,0,t.serialNoList,\"m_attributesetinstance_id\",\"serialno\",!0,\"Select Serial No\",1e3,!1),l(n,51,0,t.addEditServiceProductForm.controls.serialNoCtrl),l(n,59,0,\"floating\"),l(n,64,0,t.addEditServiceProductForm.controls.quantityCtrl),l(n,67,0,\"number\"),l(n,71,0,\"none\"),l(n,74,0,\"primary\",!t.addEditServiceProductForm.valid),l(n,78,0,\"primary\",!t.btnSaveDisabled),l(n,86,0,\"medium\",\"none\"),l(n,91,0,\"cart\"),l(n,95,0,t.tempCartProduct)},function(l,n){l(n,14,0,e.Jb(n,18).ngClassUntouched,e.Jb(n,18).ngClassTouched,e.Jb(n,18).ngClassPristine,e.Jb(n,18).ngClassDirty,e.Jb(n,18).ngClassValid,e.Jb(n,18).ngClassInvalid,e.Jb(n,18).ngClassPending),l(n,34,1,[e.Jb(n,35)._cssClass,e.Jb(n,35)._isIos,e.Jb(n,35)._isMD,e.Jb(n,35)._isMultipleCssClass,e.Jb(n,35)._hasValueCssClass,e.Jb(n,35)._hasPlaceholderCssClass,e.Jb(n,35)._hasIonLabelCssClass,e.Jb(n,35)._hasDefaultIonLabelCssClass,e.Jb(n,35)._hasFixedIonLabelCssClass,e.Jb(n,35)._hasStackedIonLabelCssClass,e.Jb(n,35)._hasFloatingIonLabelCssClass,e.Jb(n,35).isEnabled,e.Jb(n,35).canClear,e.Jb(n,53).ngClassUntouched,e.Jb(n,53).ngClassTouched,e.Jb(n,53).ngClassPristine,e.Jb(n,53).ngClassDirty,e.Jb(n,53).ngClassValid,e.Jb(n,53).ngClassInvalid,e.Jb(n,53).ngClassPending]),l(n,61,0,e.Jb(n,66).ngClassUntouched,e.Jb(n,66).ngClassTouched,e.Jb(n,66).ngClassPristine,e.Jb(n,66).ngClassDirty,e.Jb(n,66).ngClassValid,e.Jb(n,66).ngClassInvalid,e.Jb(n,66).ngClassPending)})}function x(l){return e.Tb(0,[(l()(),e.xb(0,0,null,null,1,\"app-add-edit-service-product\",[],null,null,null,f,S)),e.wb(1,114688,null,0,s,[o.f,C.m,C.a,a.a,i.a,r.a],null,null)],function(l,n){l(n,1,0)},null)}var P=e.tb(\"app-add-edit-service-product\",s,x,{},{},[]),w=t(\"lWO5\"),_=t(\"txXS\");t.d(n,\"AddEditServiceProductPageModuleNgFactory\",function(){return k});var k=e.ub(c,[],function(l){return e.Gb([e.Hb(512,e.j,e.fb,[[8,[b.a,b.b,d.a,P]],[3,e.j],e.y]),e.Hb(4608,g.p,g.o,[e.v,[2,g.F]]),e.Hb(4608,o.A,o.A,[]),e.Hb(4608,m.b,m.b,[e.A,e.g]),e.Hb(4608,m.Lb,m.Lb,[m.b,e.j,e.r]),e.Hb(4608,m.Qb,m.Qb,[m.b,e.j,e.r]),e.Hb(4608,o.f,o.f,[]),e.Hb(1073742336,g.c,g.c,[]),e.Hb(1073742336,o.z,o.z,[]),e.Hb(1073742336,o.l,o.l,[]),e.Hb(1073742336,m.Hb,m.Hb,[]),e.Hb(1073742336,w.a,w.a,[]),e.Hb(1073742336,_.a,_.a,[]),e.Hb(1073742336,o.w,o.w,[]),e.Hb(1073742336,C.o,C.o,[[2,C.t],[2,C.m]]),e.Hb(1073742336,c,c,[]),e.Hb(1024,C.k,function(){return[[{path:\"\",component:s}]]},[])])})}}]);","extractedComments":[]}