{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{PgLg:function(l,n,t){\"use strict\";t.r(n);var e=t(\"8Y7J\"),u=t(\"mrSG\"),i=t(\"Wjo3\"),a=t(\"s7LF\"),o=t(\"Dc/3\"),r=t(\"Ztuw\");class s{constructor(l,n,t,e,u,i){this.formBuilder=l,this.router=n,this.route=t,this.commonFunction=e,this.customerQuotationService=u,this.loginService=i,this.TAG=\"Add Edit Service Product Page\",this.isCardCollapse=1,this.prodSearchTextCount=0,this.tempCartProduct=[],this.btnSaveDisabled=!1}ngOnInit(){this.addEditServiceProductForm=this.formBuilder.group({serialNoCtrl:[,a.y.required],quantityCtrl:[{value:\"\",disabled:!0},a.y.required]})}ionViewWillEnter(){try{this.route.queryParams.subscribe(l=>{l.quotation_data&&l.quotation_data.length>0&&(this.selectedQuotationData=JSON.parse(l.quotation_data),this.selectedSerialNumberProductListQuotation=JSON.parse(l.selectedSerialNumberProductList),this.tempCartProduct=this.selectedSerialNumberProductListQuotation,this.selectedQuotationData&&this.selectedQuotationData.service_product_id.id&&this.customerQuotationService.getSerialNoProductList(this.selectedQuotationData.service_product_id.id,\"\").subscribe(l=>{l&&(l.length>this.loginService.minlistcount?this.tempSerialNumberLess10=[]:setTimeout(()=>{this.tempSerialNumberLess10=l,1==this.tempSerialNumberLess10.length&&(this.addEditServiceProductForm.controls.serialNoCtrl.setValue(this.tempSerialNumberLess10[0]),this.selectedSerialNo=this.serialNoList[0])},100))}),this.tempCartProduct&&(this.btnSaveDisabled=!0))})}catch(l){}}onSerialNoClose(l){try{l.component.searchText=\"\"}catch(n){}}onSerialNoChange(l){try{null!=l.value&&(this.selectedSerialNo=l.value,this.addEditServiceProductForm.controls.quantityCtrl.setValue(1),l.component._searchText=\"\")}catch(n){}}onSerialNoSearch(l){try{this.prodSearchTextCount++;var n=l.text;n.length>=3?(this.prodSearchTextCount=0,this.bindSerialNoProduct(n)):this.serialNoList=this.tempSerialNumberLess10}catch(t){}}bindSerialNoProduct(l){return u.__awaiter(this,void 0,void 0,function*(){try{\"\"!=l?this.customerQuotationService.getSerialNoProductList(this.selectedQuotationData.service_product_id.id,l).subscribe(l=>{this.serialNoList=l}):this.serialNoList=this.tempSerialNumberLess10}catch(n){}})}removeProduct(l){try{const t=this.tempCartProduct.filter(n=>n.m_attributesetinstance_id!=l.m_attributesetinstance_id);this.tempCartProduct=t}catch(n){}}onSaveCart(){try{if(null!=this.tempCartProduct&&null!=this.tempCartProduct){let l={queryParams:{cartList:JSON.stringify(this.tempCartProduct),selectedQuotationData:JSON.stringify(this.selectedQuotationData)}};this.router.navigate([\"customer-quotation\"],l)}else this.commonFunction.presentAlert(\"Add Product\",\"Message!\",\"Your Cart Is Empty\")}catch(l){}}addToCart(){return u.__awaiter(this,void 0,void 0,function*(){try{if(this.tempCartProduct)if(this.tempCartProduct.filter(l=>l.m_attributesetinstance_id==this.selectedSerialNo.m_attributesetinstance_id).length>0)this.commonFunction.presentAlert(\"Add Product\",\"Validation\",\"This product is already added with 1 quantity.\"),this.addEditServiceProductForm.controls.serialNoCtrl.reset();else{const l=yield this.customerQuotationService.getSerialNoProductDetail(this.selectedQuotationData.selectedBusinessPartnerKey.id,this.selectedQuotationData.service_product_id.id,this.selectedQuotationData.bp_shiping_add_id.id,this.selectedQuotationData.bp_billing_add_id.id).toPromise();this.tempCartProduct.push({m_attributesetinstance_id:this.selectedSerialNo.m_attributesetinstance_id,serialno:this.selectedSerialNo.serialno?this.selectedSerialNo.serialno:\"\",taxname:l.taxname?l.taxname:\"\",taxrate:l.taxrate?l.taxrate:\"\",taxid:l.taxid?l.taxid:\"\",totgrossamt:l.totgrossamt?l.totgrossamt:\"\",netamt:l.newamt?l.newamt:\"\",qty:\"1\",uomname:l.uomname?l.uomname:\"\",rate:l.rate?l.rate:\"\",c_uom_id:l.c_uom_id?l.c_uom_id:\"\"}),this.selectedSerialNo=\"\",this.addEditServiceProductForm.controls.serialNoCtrl.setValue(\"\"),this.addEditServiceProductForm.controls.quantityCtrl.setValue(\"\"),this.btnSaveDisabled=!0}}catch(l){this.commonFunction.presentAlert(\"Add Product\",l.status,l.error)}})}}class c{}var b=t(\"ekNO\"),d=t(\"pMnS\"),h=t(\"oBZk\"),m=t(\"ZZ/e\"),p=t(\"qyy+\"),g=t(\"SVse\"),C=t(\"iInd\"),S=e.sb({encapsulation:0,styles:[[\"\"]],data:{}});function v(l){return e.Qb(0,[(l()(),e.ub(0,0,null,null,6,\"ion-item\",[],null,null,null,h.xb,h.x)),e.tb(1,49152,null,0,m.K,[e.h,e.k,e.x],null,null),(l()(),e.ub(2,0,null,0,1,\"ion-icon\",[[\"name\",\"trash\"],[\"slot\",\"end\"]],null,[[null,\"click\"]],function(l,n,t){var e=!0;return\"click\"===n&&(e=!1!==l.component.removeProduct(l.context.$implicit)&&e),e},h.rb,h.t)),e.tb(3,49152,null,0,m.F,[e.h,e.k,e.x],{name:[0,\"name\"]},null),(l()(),e.ub(4,0,null,0,2,\"ion-label\",[],null,null,null,h.yb,h.A)),e.tb(5,49152,null,0,m.Q,[e.h,e.k,e.x],null,null),(l()(),e.Ob(6,0,[\"\",\"\"]))],function(l,n){l(n,3,0,\"trash\")},function(l,n){l(n,6,0,n.context.$implicit.serialno)})}function x(l){return e.Qb(0,[(l()(),e.ub(0,0,null,null,11,\"ion-header\",[],null,null,null,h.qb,h.s)),e.tb(1,49152,null,0,m.E,[e.h,e.k,e.x],null,null),(l()(),e.ub(2,0,null,0,9,\"ion-toolbar\",[],null,null,null,h.Ub,h.W)),e.tb(3,49152,null,0,m.Fb,[e.h,e.k,e.x],null,null),(l()(),e.ub(4,0,null,0,2,\"ion-title\",[],null,null,null,h.Sb,h.U)),e.tb(5,49152,null,0,m.Db,[e.h,e.k,e.x],null,null),(l()(),e.Ob(-1,0,[\"Add Serial No\"])),(l()(),e.ub(7,0,null,0,4,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,h.db,h.f)),e.tb(8,49152,null,0,m.o,[e.h,e.k,e.x],null,null),(l()(),e.ub(9,0,null,0,2,\"ion-back-button\",[],null,[[null,\"click\"]],function(l,n,t){var u=!0;return\"click\"===n&&(u=!1!==e.Gb(l,11).onClick(t)&&u),u},h.ab,h.c)),e.tb(10,49152,null,0,m.j,[e.h,e.k,e.x],null,null),e.tb(11,16384,null,0,m.k,[[2,m.lb],m.Mb],null,null),(l()(),e.ub(12,0,null,null,83,\"ion-content\",[],null,null,null,h.lb,h.n)),e.tb(13,49152,null,0,m.x,[e.h,e.k,e.x],null,null),(l()(),e.ub(14,0,null,0,81,\"form\",[[\"novalidate\",\"\"]],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngSubmit\"],[null,\"submit\"],[null,\"reset\"]],function(l,n,t){var u=!0,i=l.component;return\"submit\"===n&&(u=!1!==e.Gb(l,16).onSubmit(t)&&u),\"reset\"===n&&(u=!1!==e.Gb(l,16).onReset()&&u),\"ngSubmit\"===n&&(u=!1!==i.onSaveCart()&&u),u},null,null)),e.tb(15,16384,null,0,a.C,[],null,null),e.tb(16,540672,null,0,a.j,[[8,null],[8,null]],{form:[0,\"form\"]},{ngSubmit:\"ngSubmit\"}),e.Lb(2048,null,a.c,null,[a.j]),e.tb(18,16384,null,0,a.r,[[4,a.c]],null,null),(l()(),e.ub(19,0,null,null,61,\"ion-card\",[],null,null,null,h.ib,h.g)),e.tb(20,49152,null,0,m.p,[e.h,e.k,e.x],null,null),(l()(),e.ub(21,0,null,0,59,\"ion-card-content\",[],null,null,null,h.eb,h.h)),e.tb(22,49152,null,0,m.q,[e.h,e.k,e.x],null,null),(l()(),e.ub(23,0,null,0,57,\"ion-grid\",[],null,null,null,h.pb,h.r)),e.tb(24,49152,null,0,m.D,[e.h,e.k,e.x],null,null),(l()(),e.ub(25,0,null,0,28,\"ion-row\",[],null,null,null,h.Kb,h.M)),e.tb(26,49152,null,0,m.mb,[e.h,e.k,e.x],null,null),(l()(),e.ub(27,0,null,0,26,\"ion-col\",[],null,null,null,h.kb,h.m)),e.tb(28,49152,null,0,m.w,[e.h,e.k,e.x],null,null),(l()(),e.ub(29,0,null,0,24,\"ion-item\",[],null,null,null,h.xb,h.x)),e.tb(30,49152,null,0,m.K,[e.h,e.k,e.x],null,null),(l()(),e.ub(31,0,null,0,2,\"ion-label\",[[\"position\",\"stacked\"]],null,null,null,h.yb,h.A)),e.tb(32,49152,null,0,m.Q,[e.h,e.k,e.x],{position:[0,\"position\"]},null),(l()(),e.Ob(-1,0,[\"Serial No\"])),(l()(),e.ub(34,0,null,0,19,\"ionic-selectable\",[[\"itemTextField\",\"serialno\"],[\"itemValueField\",\"m_attributesetinstance_id\"],[\"placeholder\",\"Select Serial No\"]],[[2,\"ionic-selectable\",null],[2,\"ionic-selectable-ios\",null],[2,\"ionic-selectable-md\",null],[2,\"ionic-selectable-is-multiple\",null],[2,\"ionic-selectable-has-value\",null],[2,\"ionic-selectable-has-placeholder\",null],[2,\"ionic-selectable-has-label\",null],[2,\"ionic-selectable-label-default\",null],[2,\"ionic-selectable-label-fixed\",null],[2,\"ionic-selectable-label-stacked\",null],[2,\"ionic-selectable-label-floating\",null],[2,\"ionic-selectable-is-enabled\",null],[2,\"ionic-selectable-can-clear\",null],[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"onChange\"],[null,\"onClose\"],[null,\"onSearch\"]],function(l,n,t){var e=!0,u=l.component;return\"onChange\"===n&&(e=!1!==u.onSerialNoChange(t)&&e),\"onClose\"===n&&(e=!1!==u.onSerialNoClose(t)&&e),\"onSearch\"===n&&(e=!1!==u.onSerialNoSearch(t)&&e),e},b.d,b.c)),e.tb(35,376832,null,14,p.a,[m.Lb,m.Pb,[2,m.K],e.q,e.k,e.C],{items:[0,\"items\"],itemValueField:[1,\"itemValueField\"],itemTextField:[2,\"itemTextField\"],canSearch:[3,\"canSearch\"],placeholder:[4,\"placeholder\"],searchDebounce:[5,\"searchDebounce\"],shouldStoreItemValue:[6,\"shouldStoreItemValue\"]},{onChange:\"onChange\",onSearch:\"onSearch\",onClose:\"onClose\"}),e.Mb(603979776,1,{valueTemplate:0}),e.Mb(603979776,2,{itemTemplate:0}),e.Mb(603979776,3,{itemEndTemplate:0}),e.Mb(603979776,4,{titleTemplate:0}),e.Mb(603979776,5,{placeholderTemplate:0}),e.Mb(603979776,6,{messageTemplate:0}),e.Mb(603979776,7,{groupTemplate:0}),e.Mb(603979776,8,{groupEndTemplate:0}),e.Mb(603979776,9,{closeButtonTemplate:0}),e.Mb(603979776,10,{searchFailTemplate:0}),e.Mb(603979776,11,{addItemTemplate:0}),e.Mb(603979776,12,{footerTemplate:0}),e.Mb(603979776,13,{headerTemplate:0}),e.Mb(603979776,14,{itemIconTemplate:0}),e.Lb(1024,null,a.o,function(l){return[l]},[p.a]),e.tb(51,540672,null,0,a.h,[[8,null],[8,null],[6,a.o],[2,a.B]],{form:[0,\"form\"]},null),e.Lb(2048,null,a.p,null,[a.h]),e.tb(53,16384,null,0,a.q,[[4,a.p]],null,null),(l()(),e.ub(54,0,null,0,13,\"ion-row\",[],null,null,null,h.Kb,h.M)),e.tb(55,49152,null,0,m.mb,[e.h,e.k,e.x],null,null),(l()(),e.ub(56,0,null,0,11,\"ion-item\",[],null,null,null,h.xb,h.x)),e.tb(57,49152,null,0,m.K,[e.h,e.k,e.x],null,null),(l()(),e.ub(58,0,null,0,2,\"ion-label\",[[\"position\",\"floating\"]],null,null,null,h.yb,h.A)),e.tb(59,49152,null,0,m.Q,[e.h,e.k,e.x],{position:[0,\"position\"]},null),(l()(),e.Ob(-1,0,[\"Quantity\"])),(l()(),e.ub(61,0,null,0,6,\"ion-input\",[[\"type\",\"number\"]],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ionBlur\"],[null,\"ionChange\"]],function(l,n,t){var u=!0;return\"ionBlur\"===n&&(u=!1!==e.Gb(l,62)._handleBlurEvent(t.target)&&u),\"ionChange\"===n&&(u=!1!==e.Gb(l,62)._handleIonChange(t.target)&&u),u},h.ub,h.w)),e.tb(62,16384,null,0,m.Ob,[e.k],null,null),e.Lb(1024,null,a.o,function(l){return[l]},[m.Ob]),e.tb(64,540672,null,0,a.h,[[8,null],[8,null],[6,a.o],[2,a.B]],{form:[0,\"form\"]},null),e.Lb(2048,null,a.p,null,[a.h]),e.tb(66,16384,null,0,a.q,[[4,a.p]],null,null),e.tb(67,49152,null,0,m.J,[e.h,e.k,e.x],{type:[0,\"type\"]},null),(l()(),e.ub(68,0,null,0,12,\"ion-row\",[],null,null,null,h.Kb,h.M)),e.tb(69,49152,null,0,m.mb,[e.h,e.k,e.x],null,null),(l()(),e.ub(70,0,null,0,10,\"ion-item\",[[\"float-right\",\"\"],[\"lines\",\"none\"]],null,null,null,h.xb,h.x)),e.tb(71,49152,null,0,m.K,[e.h,e.k,e.x],{lines:[0,\"lines\"]},null),e.tb(72,16384,null,0,m.e,[e.k],null,null),(l()(),e.ub(73,0,null,0,3,\"ion-button\",[[\"color\",\"primary\"],[\"text-center\",\"\"]],null,[[null,\"click\"]],function(l,n,t){var e=!0;return\"click\"===n&&(e=!1!==l.component.addToCart()&&e),e},h.cb,h.e)),e.tb(74,49152,null,0,m.n,[e.h,e.k,e.x],{color:[0,\"color\"],disabled:[1,\"disabled\"]},null),e.tb(75,16384,null,0,m.e,[e.k],null,null),(l()(),e.Ob(-1,0,[\"Add to cart\"])),(l()(),e.ub(77,0,null,0,3,\"ion-button\",[[\"color\",\"primary\"],[\"text-center\",\"\"]],null,[[null,\"click\"]],function(l,n,t){var e=!0;return\"click\"===n&&(e=!1!==l.component.onSaveCart()&&e),e},h.cb,h.e)),e.tb(78,49152,null,0,m.n,[e.h,e.k,e.x],{color:[0,\"color\"],disabled:[1,\"disabled\"]},null),e.tb(79,16384,null,0,m.e,[e.k],null,null),(l()(),e.Ob(-1,0,[\"Save\"])),(l()(),e.ub(81,0,null,null,14,\"ion-card\",[],null,null,null,h.ib,h.g)),e.tb(82,49152,null,0,m.p,[e.h,e.k,e.x],null,null),(l()(),e.ub(83,0,null,0,8,\"ion-card-header\",[],null,null,null,h.fb,h.i)),e.tb(84,49152,null,0,m.r,[e.h,e.k,e.x],null,null),(l()(),e.ub(85,0,null,0,6,\"ion-item\",[[\"color\",\"medium\"],[\"lines\",\"none\"]],null,null,null,h.xb,h.x)),e.tb(86,49152,null,0,m.K,[e.h,e.k,e.x],{color:[0,\"color\"],lines:[1,\"lines\"]},null),(l()(),e.ub(87,0,null,0,2,\"ion-label\",[],null,null,null,h.yb,h.A)),e.tb(88,49152,null,0,m.Q,[e.h,e.k,e.x],null,null),(l()(),e.Ob(-1,0,[\"Serial No\"])),(l()(),e.ub(90,0,null,0,1,\"ion-icon\",[[\"name\",\"cart\"],[\"slot\",\"start\"]],null,null,null,h.rb,h.t)),e.tb(91,49152,null,0,m.F,[e.h,e.k,e.x],{name:[0,\"name\"]},null),(l()(),e.ub(92,0,null,0,3,\"ion-card-content\",[],null,null,null,h.eb,h.h)),e.tb(93,49152,null,0,m.q,[e.h,e.k,e.x],null,null),(l()(),e.jb(16777216,null,0,1,null,v)),e.tb(95,278528,null,0,g.m,[e.P,e.M,e.q],{ngForOf:[0,\"ngForOf\"]},null)],function(l,n){var t=n.component;l(n,16,0,t.addEditServiceProductForm),l(n,32,0,\"stacked\"),l(n,35,0,t.serialNoList,\"m_attributesetinstance_id\",\"serialno\",!0,\"Select Serial No\",1e3,!1),l(n,51,0,t.addEditServiceProductForm.controls.serialNoCtrl),l(n,59,0,\"floating\"),l(n,64,0,t.addEditServiceProductForm.controls.quantityCtrl),l(n,67,0,\"number\"),l(n,71,0,\"none\"),l(n,74,0,\"primary\",!t.addEditServiceProductForm.valid),l(n,78,0,\"primary\",!t.btnSaveDisabled),l(n,86,0,\"medium\",\"none\"),l(n,91,0,\"cart\"),l(n,95,0,t.tempCartProduct)},function(l,n){l(n,14,0,e.Gb(n,18).ngClassUntouched,e.Gb(n,18).ngClassTouched,e.Gb(n,18).ngClassPristine,e.Gb(n,18).ngClassDirty,e.Gb(n,18).ngClassValid,e.Gb(n,18).ngClassInvalid,e.Gb(n,18).ngClassPending),l(n,34,1,[e.Gb(n,35)._cssClass,e.Gb(n,35)._isIos,e.Gb(n,35)._isMD,e.Gb(n,35)._isMultipleCssClass,e.Gb(n,35)._hasValueCssClass,e.Gb(n,35)._hasPlaceholderCssClass,e.Gb(n,35)._hasIonLabelCssClass,e.Gb(n,35)._hasDefaultIonLabelCssClass,e.Gb(n,35)._hasFixedIonLabelCssClass,e.Gb(n,35)._hasStackedIonLabelCssClass,e.Gb(n,35)._hasFloatingIonLabelCssClass,e.Gb(n,35).isEnabled,e.Gb(n,35).canClear,e.Gb(n,53).ngClassUntouched,e.Gb(n,53).ngClassTouched,e.Gb(n,53).ngClassPristine,e.Gb(n,53).ngClassDirty,e.Gb(n,53).ngClassValid,e.Gb(n,53).ngClassInvalid,e.Gb(n,53).ngClassPending]),l(n,61,0,e.Gb(n,66).ngClassUntouched,e.Gb(n,66).ngClassTouched,e.Gb(n,66).ngClassPristine,e.Gb(n,66).ngClassDirty,e.Gb(n,66).ngClassValid,e.Gb(n,66).ngClassInvalid,e.Gb(n,66).ngClassPending)})}function _(l){return e.Qb(0,[(l()(),e.ub(0,0,null,null,1,\"app-add-edit-service-product\",[],null,null,null,x,S)),e.tb(1,114688,null,0,s,[a.f,C.m,C.a,o.a,i.a,r.a],null,null)],function(l,n){l(n,1,0)},null)}var k=e.qb(\"app-add-edit-service-product\",s,_,{},{},[]),f=t(\"A2Kn\"),P=t(\"txXS\");t.d(n,\"AddEditServiceProductPageModuleNgFactory\",function(){return N});var N=e.rb(c,[],function(l){return e.Db([e.Eb(512,e.j,e.cb,[[8,[b.a,b.b,d.a,k]],[3,e.j],e.v]),e.Eb(4608,g.p,g.o,[e.s,[2,g.F]]),e.Eb(4608,a.A,a.A,[]),e.Eb(4608,m.b,m.b,[e.x,e.g]),e.Eb(4608,m.Lb,m.Lb,[m.b,e.j,e.p]),e.Eb(4608,m.Qb,m.Qb,[m.b,e.j,e.p]),e.Eb(4608,a.f,a.f,[]),e.Eb(1073742336,g.c,g.c,[]),e.Eb(1073742336,a.z,a.z,[]),e.Eb(1073742336,a.l,a.l,[]),e.Eb(1073742336,m.Hb,m.Hb,[]),e.Eb(1073742336,f.a,f.a,[]),e.Eb(1073742336,P.a,P.a,[]),e.Eb(1073742336,a.w,a.w,[]),e.Eb(1073742336,C.o,C.o,[[2,C.t],[2,C.m]]),e.Eb(1073742336,c,c,[]),e.Eb(1024,C.k,function(){return[[{path:\"\",component:s}]]},[])])})}}]);","extractedComments":[]}